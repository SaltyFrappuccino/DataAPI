# **Data API**

## **Содержание**

1. [Описание проекта](#описание-проекта)  
2. [Основной функционал](#основной-функционал)  
   - [Источники данных](#1-источники-данных-data-sources)  
   - [Трансформация данных](#2-трансформация-данных-data-transformation)  
   - [Модели](#3-модели-models)  
   - [Мониторинг](#4-мониторинг-monitoring)  
   - [Уведомления](#5-уведомления-notifications)  
   - [Настройки](#6-настройки-settings)  
3. [Архитектура](#архитектура)  
   - [Общая концепция](#общая-концепция)  
   - [Основные компоненты](#основные-компоненты)  

---

## **Описание проекта**

**Data API** – это современная платформа для интеграции, обработки и маршрутизации данных из множества источников в модели машинного обучения (ML).  
Цель системы – упростить работу с данными, обеспечив единое пространство для управления источниками, трансформацией данных и настройкой моделей.  

---

## **Основной функционал**

### **1. Источники данных (Data Sources)**

**Функционал:**
- Просмотр подключенных источников данных.  
- Добавление новых источников (SQL/NoSQL базы данных, API, файловое хранилище, стриминг-сервисы).  
- Настройка параметров подключения (URL, логин/пароль, токены).  
- Тест подключения с отображением статуса (успешно/ошибка).  

**Элементы UI:**
- Таблица с подключенными источниками: название, тип (SQL, API, Kafka), статус подключения.  
- Кнопка "Добавить источник" для открытия формы настройки.  
- Индикатор статуса подключения (например, зеленый для успешного).  

---

### **2. Трансформация данных (Data Transformation)**

**Функционал:**
- Определение правил преобразования данных (очистка, нормализация, фильтрация).  
- Выбор готовых шаблонов трансформации.  
- Визуализация данных до и после трансформации.  

**Элементы UI:**
- Редактор правил трансформации (drag-and-drop или текстовый редактор).  
- Таблица с примерами данных до и после обработки.  
- Список готовых шаблонов.  

---

### **3. Модели (Models)**

**Функционал:**
- Список подключенных моделей (название, версия, статус).  
- Настройка маппинга данных для моделей.  
- Просмотр логов выполнения (последние запросы, ошибки).  

**Элементы UI:**
- Карточки моделей с характеристиками.  
- Кнопка "Подключить модель".  
- Поля для маппинга данных (сопоставление полей данных с входными параметрами модели).  

---

### **4. Мониторинг (Monitoring)**

**Функционал:**
- Визуализация потоков данных в реальном времени.  
- Логи ошибок и подключений.  
- Метрики производительности (скорость обработки, объем данных).  

**Элементы UI:**
- Графики:
  - Объем обработанных данных.  
  - Задержки (latency).  
- Журнал событий: ошибки, успешные запросы, предупреждения.  

---

### **5. Уведомления (Notifications)**

**Функционал:**
- Настройка уведомлений о событиях (ошибки подключения, задержки).  
- Выбор каналов (email, Slack, Telegram).  
- История отправленных уведомлений.  

**Элементы UI:**
- Настройка триггеров (например, "уведомлять, если задержка > 5 секунд").  
- Список отправленных уведомлений.  

---

### **6. Настройки (Settings)**

**Функционал:**
- Управление пользователями и ролями (администратор, пользователь).  
- Настройка API (генерация токенов, CORS).  
- Резервное копирование и восстановление конфигураций.  

**Элементы UI:**
- Форма управления пользователями.  
- Поля для настройки API.  
- Кнопки "Экспорт" и "Импорт" настроек.  

---

# **Архитектура**

### **Общая концепция**

**Гибкость и масштабируемость:**
- Подключение и управление любыми источниками данных.  
- Независимое развитие и масштабирование компонентов.  

---

## **Основные компоненты**

### 1. Источники данных (Data Sources)
- Включает модули для подключения к различным источникам данных: SQL/NoSQL базы, API, стриминг-сервисы, файлы.
- Используются коннекторы для стандартизации взаимодействия с источниками.

### 2. Модуль обработки данных (Data Processing Layer)
- Трансформация данных: очистка, нормализация, фильтрация.
- Логика маппинга данных (приведение входных данных к формату, понятному модели).

### 3. Роутер для маршрутизации данных (Data Routing Layer)
- Управляет распределением данных между моделями.
- Поддерживает правила распределения (например, какой тип данных направлять в какую модель).

### 4. Модели (ML Models Layer)
- Набор моделей, каждая из которых настроена на получение определенного набора данных.
- Взаимодействие через API или прямую интеграцию с библиотеками.

### 5. Мониторинг и логирование (Monitoring and Logging Layer)
- Логирование всех операций: подключения, обработки данных, передачи в модели.
- Метрики производительности: время обработки, объем данных, частота ошибок.

### 6. API-слой (API Layer)
- REST/GraphQL API для взаимодействия с клиентами (UI, сторонние сервисы).
- Эндпоинты для управления источниками, моделями, настройками.

### 7. UI (Frontend Layer)
- Веб-интерфейс для управления и мониторинга.
- Интерактивные визуализации и инструменты настройки.

### 8. Управление конфигурацией (Configuration Management)
- Система для хранения и управления настройками подключения источников, параметров моделей и правил распределения данных.

- - -

# Архитектура проекта (детали)

## 1. Data Sources Layer

### Поддерживаемые типы источников:
- **SQL базы данных**: PostgreSQL, MySQL, Oracle DB.
- **NoSQL базы данных**: MongoDB, Cassandra.
- **API источники**: REST, SOAP.
- **Файлы**: CSV, Excel, JSON.
- **Стриминг-сервисы**: Kafka, RabbitMQ.

### Технологии:
- **Python** ???
- Абстракция через паттерн **Factory**: единый интерфейс для работы с различными источниками.

---

## 2. Data Processing Layer

### Функционал:
- **Очистка данных**: удаление дубликатов, обработка пропущенных значений.
- **Трансформация данных**: преобразование форматов, агрегация.
- **Маппинг данных**: сопоставление полей исходных данных с полями модели.

### Шаблоны трансформаций:
- Хранятся в базе данных (например, в формате JSON).

---

## 3. Data Routing Layer

### Функционал:
- Маршрутизация данных в зависимости от типа, источника или содержимого.
- Поддержка нескольких моделей с разными входами.

---

## 4. ML Models Layer

### Поддерживаемые варианты:
- Модели, развернутые как REST API (например, через Flask, FastAPI).
- Модели, работающие в системах MLOps (Sagemaker, MLflow).
- Ещё неразвёрнутые модели, для которых предстоит провести тюнинг/фиттинг.
- Модели, ожидающие данных для предикта.

---

## 5. Monitoring and Logging Layer

### Функционал: 
- Метрики: задержка, объем данных, процент ошибок.
- Логи: уровни INFO, ERROR, DEBUG.

### Технологии:
- Prometheus + Grafana для метрик.
- ELK Stack (Elasticsearch, Logstash, Kibana) для логов.

---

## 6. API Layer

### Эндпоинты:
- /sources: управление источниками данных.
- /models: управление моделями.
- /routes: настройка маршрутизации.

---

## 7. Frontend

### Основные модули:
- Управление источниками данных.
- Настройка маршрутов и моделей.
- Мониторинг работы..